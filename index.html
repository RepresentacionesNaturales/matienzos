<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MATIENZO — Tienda</title>
  <meta name="description" content="MATIENZO — Tradición en movimiento. Tienda online de mates tradicionales y modernos." />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Raleway:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="site">
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <div class="brand-mark">M</div>
          <div>
            <h1 class="brand-title">MATIENZO</h1>
            <div class="brand-sub">Tradición en movimiento</div>
          </div>
        </div>
        <nav class="nav">
          <a href="#catalogo">Catálogo</a>
          <a href="#packs">Packs</a>
          <a href="#contacto">Contacto</a>
          <a class="btn primary" href="#cart">Carrito</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="hero store-hero">
        <img src="logomatienzo.png" alt="Mate Matienzo" class="logomatienzo">
        <div class="hero-copy">
          <h2>MATIENZO — Mates con identidad</h2>
          <p class="muted">Tradición y diseño moderno para llevar a todas partes. Envíos a todo el país. Personalizaciones por encargo.</p>
          <div class="hero-actions">
            <a class="btn primary" href="#catalogo">Ver catálogo</a>
            <a class="btn outline" href="#packs">Ver packs</a>
          </div>
        </div>
      </section>

      <div class="layout">
        <div class="main-col">
          <section id="catalogo" class="section">
            <h3>Catálogo</h3>
            <p class="muted">Seleccioná los productos y agrégalos al carrito.</p>
            <div class="grid" id="productsGrid"></div>
          </section>

          <section id="packs" class="section">
            <h3>Packs destacados</h3>
            <div class="grid packs-grid">
              <article class="card">
                <h4>Pack Regalo — Básico</h4>
                <p class="small">Mate + Bombilla + Funda de lienzo. Caja kraft lista para regalar.</p>
                <div class="card-row">
                  <div class="price">$28.000</div>
                  <button class="btn" onclick="addToCart('Pack Regalo — Básico', 28000)">Agregar</button>
                </div>
              </article>

              <article class="card">
                <h4>Pack Premium — Edición limitada</h4>
                <p class="small">Mate forrado premium + Bombilla + Caja numerada.</p>
                <div class="card-row">
                  <div class="price">$38.500</div>
                  <button class="btn" onclick="addToCart('Pack Premium — Edición limitada', 38500)">Agregar</button>
                </div>
              </article>
            </div>
          </section>

          <section id="contacto" class="section contact-section">
            <h3>Contacto</h3>
            <p class="muted">Escribinos por WhatsApp desde este formulario o directamente a nuestro Instagram.</p>
            <form id="contactForm" onsubmit="submitContact(event)">
              <div class="form-grid">
                <input type="text" name="nombre" id="nombre" placeholder="Nombre" required>
                <input type="tel" name="telefono" id="telefono" placeholder="Teléfono / WhatsApp" required>
                <input type="email" name="email" id="email" placeholder="Email (opcional)">
                <input type="text" name="asunto" id="asunto" placeholder="Asunto / Producto (opcional)">
                <textarea name="mensaje" id="mensaje" placeholder="Mensaje" required></textarea>
              </div>
              <div class="form-actions">
                <button class="btn primary" type="submit">Enviar por WhatsApp</button>
                <button type="button" class="btn outline" onclick="clearContact()">Limpiar</button>
              </div>
            </form>
          </section>
        </div>

        <aside class="sidebar" id="cart">
          <div class="cart-box">
            <h4>Tu carrito</h4>
            <div id="cartList" class="cart-list">
              <div class="muted">No hay productos en el carrito.</div>
            </div>
            <div id="cartTotalRow" class="cart-total" style="display:none">
              <div>Total</div>
              <div id="cartTotal" class="price">$0</div>
            </div>

            <div class="cart-actions">
              <button class="btn primary" onclick="checkout()">Enviar pedido por WhatsApp</button>
              <button class="btn outline" onclick="emptyCart()">Vaciar carrito</button>
            </div>

            <div class="muted small">Al enviar, se abrirá WhatsApp para completar el pedido. Número a configurar en el código.</div>
          </div>
        </aside>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div>
          <strong>MATIENZO</strong> — tradición en movimiento<br>
          <small>Diseño © MATIENZO — Tradición en movimiento</small>
        </div>
        <div class="footer-actions">
          <a href="https://www.instagram.com/matienzo.mates" target="_blank" class="icon-link" aria-label="Instagram">
            <!-- Instagram SVG -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="2" y="2" width="20" height="20" rx="5" stroke="#2F3E2F" stroke-width="1.4" fill="none"/><circle cx="12" cy="12" r="3" stroke="#2F3E2F" stroke-width="1.4" fill="none"/><circle cx="17.6" cy="6.4" r="0.6" fill="#2F3E2F"/></svg>
          </a>
          <a href="#" id="waFooter" class="icon-link" aria-label="WhatsApp">
            <!-- WhatsApp SVG -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20.5 3.5H3.5v17l3-1 1 1 11-3v-14z" stroke="#2F3E2F" stroke-width="1.2" fill="none"/></svg>
          </a>
        </div>
      </div>
    </footer>

  </div>

<script>
/* Configuración */
const whatsappNumber = ""; // <-- deja vacío o coloca tu número en formato internacional sin signos: 5493411234567
const instagramUrl = "https://www.instagram.com/matienzo.mates";

/* Productos de ejemplo */
const products = [
  { id: 'mate-calabaza', title: 'Mate Calabaza Forrado', price: 12900, tag: 'Tradicional', img: 'matecalabazaforrado.jpg' },
  { id: 'mate-acero', title: 'Mate Térmico Acero', price: 18500, tag: 'Moderno', img: 'assets/mate_acero.jpg' },
  { id: 'set-compacto', title: 'Set Compacto — Mate + Bombilla', price: 24900, tag: 'Pack', img: 'assets/set_compacto.jpg' },
  { id: 'mate-personalizado', title: 'Mate Personalizado (encargo)', price: 29000, tag: 'Premium', img: 'assets/mate_personalizado.jpg' }
];

let cart = {};

function formatPrice(n){ return '$' + n.toLocaleString('es-AR'); }

function renderProducts(){
  const grid = document.getElementById('productsGrid');
  products.forEach(p => {
    const card = document.createElement('article');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.title}" onerror="this.style.opacity=0.45"/>
      <div class="card-body">
        <h4>${p.title}</h4>
        <div class="card-row">
          <div>
            <div class="price">${formatPrice(p.price)}</div>
            <div class="small muted">${p.tag}</div>
          </div>
          <div class="card-actions">
            <button class="btn outline" onclick="addToCart('${p.id}', ${p.price})">Agregar</button>
          </div>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
}

function addToCart(productId, price){
  const prod = products.find(p => p.id === productId) || products.find(p => p.title === productId);
  let product = prod;
  if(!product){
    product = { id: productId, title: productId, price: price || 0, img: 'assets/placeholder.jpg' };
  }
  if(cart[product.id]) cart[product.id].qty += 1;
  else cart[product.id] = { product, qty: 1 };
  renderCart();
}

function renderCart(){
  const list = document.getElementById('cartList');
  list.innerHTML = '';
  const keys = Object.keys(cart);
  if(keys.length === 0){
    list.innerHTML = '<div class="muted">No hay productos en el carrito.</div>';
    document.getElementById('cartTotalRow').style.display = 'none';
    return;
  }
  let total = 0;
  keys.forEach(k => {
    const e = cart[k];
    const p = e.product;
    const subtotal = e.qty * p.price;
    total += subtotal;
    const item = document.createElement('div');
    item.className = 'cart-item';
    item.innerHTML = `
      <img src="${p.img}" alt="${p.title}" onerror="this.style.opacity=0.45"/>
      <div class="cart-info">
        <div class="cart-title">${p.title}</div>
        <div class="small muted">${formatPrice(p.price)} x ${e.qty} = ${formatPrice(subtotal)}</div>
      </div>
      <div class="cart-controls">
        <div class="qty">
          <button onclick="changeQty('${p.id}', -1)">-</button>
          <div class="qty-num">${e.qty}</div>
          <button onclick="changeQty('${p.id}', 1)">+</button>
        </div>
        <button class="remove" onclick="removeItem('${p.id}')">Eliminar</button>
      </div>
    `;
    list.appendChild(item);
  });
  document.getElementById('cartTotal').innerText = formatPrice(total);
  document.getElementById('cartTotalRow').style.display = 'flex';
}

/* cart controls */
function changeQty(id, delta){
  if(!cart[id]) return;
  cart[id].qty += delta;
  if(cart[id].qty <= 0) delete cart[id];
  renderCart();
}
function removeItem(id){ delete cart[id]; renderCart(); }
function emptyCart(){ if(confirm('Vaciar el carrito?')){ cart = {}; renderCart(); } }

/* Checkout -> WhatsApp */
function checkout(){
  const keys = Object.keys(cart);
  if(keys.length === 0){ alert('El carrito está vacío.'); return; }
  let lines = ['Pedido desde MATIENZO','----------------------'];
  let total = 0;
  keys.forEach(k => {
    const e = cart[k];
    lines.push(`${e.qty} x ${e.product.title} — ${formatPrice(e.product.price)} c/u`);
    total += e.qty * e.product.price;
  });
  lines.push('----------------------');
  lines.push('Total: ' + formatPrice(total));
  lines.push('');
  lines.push('Datos del cliente:');
  lines.push('Nombre:');
  lines.push('Teléfono (WhatsApp):');
  lines.push('Dirección / Comentarios:');
  const message = encodeURIComponent(lines.join('\n'));
  if(whatsappNumber && whatsappNumber.trim() !== ''){
    window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
  } else {
    const userNumber = prompt('Ingresá el número de WhatsApp al que enviar el pedido (ej: 5493411234567):');
    if(userNumber && userNumber.trim() !== ''){
      window.open(`https://wa.me/${userNumber.replace(/[\s+\-()]/g,'')}?text=${message}`, '_blank');
    } else {
      alert('No se envió el pedido. Configurá tu número en el código para que el botón funcione automáticamente.');
    }
  }
}

/* Contact form: envie a WhatsApp */
function submitContact(e){
  e.preventDefault();
  const nombre = document.getElementById('nombre').value.trim();
  const telefono = document.getElementById('telefono').value.trim();
  const email = document.getElementById('email').value.trim();
  const asunto = document.getElementById('asunto').value.trim();
  const mensaje = document.getElementById('mensaje').value.trim();
  let lines = ['Contacto desde MATIENZO','----------------------'];
  lines.push(`Nombre: ${nombre}`);
  lines.push(`Teléfono: ${telefono}`);
  if(email) lines.push(`Email: ${email}`);
  if(asunto) lines.push(`Asunto: ${asunto}`);
  lines.push('');
  lines.push('Mensaje:');
  lines.push(mensaje);
  const text = encodeURIComponent(lines.join('\n'));
  if(whatsappNumber && whatsappNumber.trim() !== ''){
    window.open(`https://wa.me/${whatsappNumber}?text=${text}`, '_blank');
  } else {
    // open with the user's phone to send to owner: ask for owner number or let user enter their own
    const owner = prompt('Ingresá el número de WhatsApp para recibir este contacto (ej: 5493411234567):');
    if(owner && owner.trim() !== ''){
      window.open(`https://wa.me/${owner.replace(/[\s+\-()]/g,'')}?text=${text}`, '_blank');
    } else {
      alert('No se envió el mensaje. Podés configurar el número del negocio en el código.');
    }
  }
}

function clearContact(){
  document.getElementById('contactForm').reset();
}

/* Init */
document.addEventListener('DOMContentLoaded', () => {
  renderProducts();
  renderCart();
  // footer whatsapp quick link
  document.getElementById('waFooter').addEventListener('click', (ev) => {
    ev.preventDefault();
    const msg = encodeURIComponent('Hola! Quiero hacer una consulta desde la web de MATIENZO.');
    if(whatsappNumber && whatsappNumber.trim() !== ''){
      window.open(`https://wa.me/${whatsappNumber}?text=${msg}`, '_blank');
    } else {
      const owner = prompt('Ingresá el número de WhatsApp para recibir mensajes (ej: 5493411234567):');
      if(owner && owner.trim() !== '') window.open(`https://wa.me/${owner.replace(/[\s+\-()]/g,'')}?text=${msg}`, '_blank');
    }
  });
});
</script>
</body>
</html>

